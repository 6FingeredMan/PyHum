

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>API - PyHum</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="PyHum">
<meta property="og:title" content="API">


  <link rel="canonical" href="http://dbuscombe-usgs.github.io/PyHum//non-menu-page/">
  <meta property="og:url" content="http://dbuscombe-usgs.github.io/PyHum//non-menu-page/">







  

  












  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "PyHum",
      "url" : "http://dbuscombe-usgs.github.io/PyHum/",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://dbuscombe-usgs.github.io/PyHum//feed.xml" type="application/atom+xml" rel="alternate" title="PyHum Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://dbuscombe-usgs.github.io/PyHum//assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="http://dbuscombe-usgs.github.io/PyHum//images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="http://dbuscombe-usgs.github.io/PyHum//images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="http://dbuscombe-usgs.github.io/PyHum//images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="http://dbuscombe-usgs.github.io/PyHum//images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="http://dbuscombe-usgs.github.io/PyHum//images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="http://dbuscombe-usgs.github.io/PyHum//images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="http://dbuscombe-usgs.github.io/PyHum//images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="http://dbuscombe-usgs.github.io/PyHum//images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="http://dbuscombe-usgs.github.io/PyHum//images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="http://dbuscombe-usgs.github.io/PyHum//assets/css/academicons.css"/>
<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://dbuscombe-usgs.github.io/PyHum//">PyHum</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://dbuscombe-usgs.github.io/PyHum//publications/">Publications</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://dbuscombe-usgs.github.io/PyHum//portfolio/">Portfolio</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="https://user-images.githubusercontent.com/3596509/35187745-ed45a05a-fde5-11e7-8f7e-5142b59dc772.png" alt="Developed by: Daniel Buscombe">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Developed by: Daniel Buscombe</h3>
    <p class="author__bio">www.danielbuscombe.com</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Northern Arizona University</li>
      
      
      
      
        <li><a href="mailto:daniel.buscombe@nau.edu"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://github.com/dbuscombe-usgs"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://scholar.google.com/citations?user=bwVl0NwAAAAJ&hl=en"><i class="ai ai-google-scholar-square ai-fw"></i> Google Scholar</a></li>
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="API">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">API
</h1>
          
        
        
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
        <h2 id="read-module">Read module</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>Read a .DAT and associated set of .SON files recorded by a Humminbird(R)
instrument. 

The following Humminbird units are supported:
1) 700, 800, 900 and 1100 series
2) ONIX series

Parse the data into a set of memory mapped files that will
subsequently be used by the other functions of the PyHum module. 

Export time-series data and metadata in other formats. 

Create a kml file for visualising boat track
</code></pre>
</div>

<h3 id="syntax">Syntax</h3>

<p>You call the function like this::</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[] = PyHum.read(humfile, sonpath, cs2cs_args, c, draft, doplot, t, bedpick, flip_lr, chunksize, model, calc_bearing, filt_bearing, cog, chunk)
</code></pre>
</div>

<h3 id="parameters">Parameters</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>humfile : str
   path to the .DAT file
sonpath : str
   path where the *.SON files are
cs2cs_args : int, *optional* [Default="epsg:26949"]
   arguments to create coordinates in a projected coordinate system
   this argument gets given to pyproj to turn wgs84 (lat/lon) coordinates
   into any projection supported by the proj.4 libraries
c : float, *optional* [Default=1450.0]
   speed of sound in water (m/s). Defaults to a value of freshwater
draft : float, *optional* [Default=0.3]
   draft from water surface to transducer face (m)
doplot : float, *optional* [Default=1]
   if 1, plots will be made
t : float, *optional* [Default=0.108]
   length of transducer array (m).
   Default value is that of the 998 series Humminbird(R)
bedpick : int, *optional* [Default=1]
   if 1, bedpicking with be carried out automatically
   if 0, user will be prompted to pick the bed location on screen
flip_lr : int, *optional* [Default=0]
   if 1, port and starboard scans will be flipped
   (for situations where the transducer is flipped 180 degrees)
model: int, *optional* [Default=998]
   A 3 or 4 number code indicating the model number 
   Examples: 998, 997, 1198, 1199
cog : int, *optional* [Default=1]
   if 1, heading calculated assuming GPS course-over-ground rather than
   using a compass
calc_bearing : float, *optional* [Default=0]
   if 1, bearing will be calculated from coordinates
filt_bearing : float, *optional* [Default=0]
   if 1, bearing will be filtered
chunk : str, *optional* [Default='d100' (distance, 100 m)]
   letter, followed by a number.
   There are the following letter options:
   'd' - parse chunks based on distance, then number which is distance in m
   'p' - parse chunks based on number of pings, then number which is number of pings 
   'h' - parse chunks based on change in heading, then number which is the change in heading in degrees
   '1' - process just 1 chunk
</code></pre>
</div>

<h3 id="returns">Returns</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>sonpath+base+'_data_port.dat': memory-mapped file
    contains the raw echogram from the port side
    sidescan sonar (where present)

sonpath+base+'_data_port.dat': memory-mapped file
    contains the raw echogram from the starboard side
    sidescan sonar (where present)

sonpath+base+'_data_dwnhi.dat': memory-mapped file
    contains the raw echogram from the high-frequency
    echosounder (where present)

sonpath+base+'_data_dwnlow.dat': memory-mapped file
    contains the raw echogram from the low-frequency
    echosounder (where present)
    
sonpath+base+"trackline.kml": google-earth kml file
    contains the trackline of the vessel during data
    acquisition
 
sonpath+base+'rawdat.csv': comma separated value file
    contains time-series data. columns corresponding to
    longitude
    latitude
    easting (m)
    northing (m)
    depth to bed (m)
    alongtrack cumulative distance (m)
    vessel heading (deg.)
 
sonpath+base+'meta.mat': .mat file
    matlab format file containing a dictionary object
    holding metadata information. Fields are:
    e : ndarray, easting (m)
    n : ndarray, northing (m)
    es : ndarray, low-pass filtered easting (m)
    ns : ndarray, low-pass filtered northing (m)
    lat : ndarray, latitude
    lon : ndarray, longitude
    shape_port : tuple, shape of port scans in memory mapped file
    shape_star : tuple, shape of starboard scans in memory mapped file
    shape_hi : tuple, shape of high-freq. scans in memory mapped file
    shape_low : tuple, shape of low-freq. scans in memory mapped file
    dep_m : ndarray, depth to bed (m)
    dist_m : ndarray, distance along track (m)
    heading : ndarray, heading of vessel (deg. N)
    pix_m: float, size of 1 pixel in across-track dimension (m)
    bed : ndarray, depth to bed (m)
    c : float, speed of sound in water (m/s)
    t : length of sidescan transducer array (m)
    f : frequency of sidescan sound (kHz)
    spd : ndarray, vessel speed (m/s)
    time_s : ndarray, time elapsed (s)
    caltime : ndarray, unix epoch time (s)
</code></pre>
</div>

<h1 id="correct-module">Correct module</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>Remove water column and carry out some rudimentary radiometric corrections, 
accounting for directivity and attenuation with range
</code></pre>
</div>

<h1 id="syntax-1">Syntax</h1>

<p>You call the function like this::</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[] = PyHum.correct(humfile, sonpath, maxW, doplot, correct_withwater, ph, temp, salinity, dconcfile)
</code></pre>
</div>

<h1 id="parameters-1">Parameters</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>humfile : str
   path to the .DAT file

sonpath : str
   path where the *.SON files are

maxW : int, *optional* [Default=1000]
   maximum transducer power

doplot : int, *optional* [Default=1]
   1 = make plots, otherwise do not

dofilt : int, *optional* [Default=0]
   1 = apply a phase preserving filter to the scans

correct_withwater : int, *optional* [Default=0]
   1 = apply radiometric correction but don't remove water column from scans

ph : float, *optional* [Default=7.0]
   water acidity in pH

temp : float, *optional* [Default=10.0]
   water temperature in degrees Celsius

salinity : float, *optional* [Default=0.0]
   salinity of water in parts per thousand

dconcfile : str, *optional* [Default=None]
   file path of a text file containing sediment concentration data
   this file must contain the following fields separated by spaces:
   size (microns) conc (mg/L) dens (kg/m3)
   with one row per grain size, for example:
   30 1700 2200
   100 15 2650
</code></pre>
</div>

<h1 id="returns-1">Returns</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>sonpath+base+'_data_star_l.dat': memory-mapped file
    contains the starboard scan with water column removed

sonpath+base+'_data_port_l.dat': memory-mapped file
    contains the portside scan with water column removed

sonpath+base+'_data_star_la.dat': memory-mapped file
    contains the starboard scan with water column removed and 
    radiometrically corrected

sonpath+base+'_data_port_la.dat': memory-mapped file
    contains the portside scan with water column removed and
    radiometrically corrected

sonpath+base+'_data_range.dat': memory-mapped file
    contains the cosine of the range which is used to correct
    for attenuation with range

sonpath+base+'_data_dwnlow_l.dat': memory-mapped file
    contains the low freq. downward scan with water column removed

sonpath+base+'_data_dwnhi_l.dat': memory-mapped file
    contains the high freq. downward  scan with water column removed

sonpath+base+'_data_dwnlow_la.dat': memory-mapped file
    contains the low freq. downward  scan with water column removed and 
    radiometrically corrected

sonpath+base+'_data_dwnhi_la.dat': memory-mapped file
    contains the high freq. downward  scan with water column removed and
    radiometrically corrected

if correct_withwater == 1:

   sonpath+base+'_data_star_lw.dat': memory-mapped file
       contains the starboard scan with water column retained and 
       radiometrically corrected

   sonpath+base+'_data_port_lw.dat': memory-mapped file
       contains the portside scan with water column retained and
       radiometrically corrected
</code></pre>
</div>

<h1 id="rmshadows-module">rmshadows module</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>Remove dark shadows in scans caused by shallows, shorelines, and attenuation of acoustics with distance
Manual or automated processing options available
Works on the radiometrically corrected outputs of the correct module
</code></pre>
</div>

<h1 id="syntax-2">Syntax</h1>

<p>You call the function like this::</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[] = PyHum.rmshadows(humfile, sonpath, win, shadowmask, kvals, doplot)
</code></pre>
</div>

<h1 id="parameters-2">Parameters</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>humfile : str
   path to the .DAT file
sonpath : str
   path where the *.SON files are
win : int, *optional* [Default=100]
   window size (pixels) for the automated shadow removal algorithm
shadowmask : int, *optional* [Default=0]
   1 = do manual shadow masking, otherwise do automatic shadow masking
kvals : int, *optional* [Default=8]
   if automatic shadowmask, this parameter sets the number of k-means to calculate 
   (the one with the lowest value will be the shadow which is removed)
doplot : int, *optional* [Default=1]
   1 = make plots, otherwise do not
</code></pre>
</div>

<h1 id="returns-2">Returns</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>sonpath+base+'_data_star_la.dat': memory-mapped file
    contains the starboard scan with water column removed and 
    radiometrically corrected, and shadows removed

sonpath+base+'_data_port_la.dat': memory-mapped file
    contains the portside scan with water column removed and
    radiometrically corrected, and shadows removed
</code></pre>
</div>

<h1 id="texture-module">texture module</h1>

<div class="highlighter-rouge"><pre class="highlight"><code> Create a texture lengthscale map using the algorithm detailed by Buscombe et al. (2015) Journal of Hydraulic Engineering

 This textural lengthscale is not a direct measure of grain size. Rather, it is a statistical 

 representation that integrates over many attributes of bed texture, of which grain size is the most important. 

 The technique is a physically based means to identify regions of texture within a sidescan echogram, 

 and could provide a basis for objective, automated riverbed sediment classification.
</code></pre>
</div>

<h1 id="syntax-3">Syntax</h1>

<p>You call the function like this::</p>

<p>[] = PyHum.texture2(humfile, sonpath, win, doplot, numclasses)</p>

<h1 id="parameters-3">Parameters</h1>

<div class="highlighter-rouge"><pre class="highlight"><code> humfile : str
   path to the .DAT file
 sonpath : str
   path where the *.SON files are
 win : int, *optional* [Default=100]
   pixel in pixels of the moving window
 shift : int, *optional* [Default=10]
   shift in pixels for moving window operation
 doplot : int, *optional* [Default=1]
   if 1, make plots, otherwise do not make plots
 numclasses : int, *optional* [Default=4]
   number of 'k means' that the texture lengthscale will be segmented into
</code></pre>
</div>

<h1 id="returns-3">Returns</h1>

<div class="highlighter-rouge"><pre class="highlight"><code> sonpath+base+'_data_class.dat': memory-mapped file
    contains the texture lengthscale map

 sonpath+base+'_data_kclass.dat': memory-mapped file
    contains the k-means segmented texture lengthscale map
</code></pre>
</div>

<h1 id="map-module">Map module</h1>

<div class="highlighter-rouge"><pre class="highlight"><code>Create plots of the spatially referenced sidescan echograms
</code></pre>
</div>

<h2 id="syntax-4">Syntax</h2>
<p>You call the function like this::</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[] = PyHum.map(humfile, sonpath, cs2cs_args, res, dowrite, mode, nn, numstdevs)
</code></pre>
</div>

<h2 id="parameters-4">Parameters</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>humfile : str
   path to the .DAT file
sonpath : str
   path where the *.SON files are
cs2cs_args : int, *optional* [Default="epsg:26949"]
   arguments to create coordinates in a projected coordinate system
   this argument gets given to pyproj to turn wgs84 (lat/lon) coordinates
   into any projection supported by the proj.4 libraries
res : float, *optional* [Default=0]
   grid resolution of output gridded texture map
   if res=0, res will be determined automatically from the spatial resolution of 1 pixel
dowrite: int, *optional* [Default=0]
   if 1, point cloud data from each chunk is written to ascii file
   if 0, processing times are speeded up considerably but point clouds are not available for further analysis
mode: int, *optional* [Default=3]
   gridding mode. 1 = nearest neighbour
                  2 = inverse weighted nearest neighbour
                  3 = Gaussian weighted nearest neighbour
nn: int, *optional* [Default=64]
   number of nearest neighbours for gridding (used if mode &gt; 1)   
numstdevs: int, *optional* [Default = 4]
   Threshold number of standard deviations in sidescan intensity per grid cell up to which to accept            
</code></pre>
</div>

<h2 id="returns-4">Returns</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>sonpath+'x_y_ss_raw'+str(p)+'.asc'  : text file
    contains the point cloud of easting, northing, and sidescan intensity
    of the pth chunk

sonpath+'GroundOverlay'+str(p)+'.kml': kml file
    contains gridded (or point cloud) sidescan intensity map for importing into google earth
    of the pth chunk

sonpath+'map'+str(p)+'.png' : 
    image overlay associated with the kml file
</code></pre>
</div>

<h1 id="texture-module-1">Texture module</h1>

<div class="highlighter-rouge"><pre class="highlight"><code> Create a texture lengthscale map using the algorithm detailed by Buscombe et al. (2015) Journal of Hydraulic Engineering

 This textural lengthscale is not a direct measure of grain size. Rather, it is a statistical 

 representation that integrates over many attributes of bed texture, of which grain size is the most important. 

 The technique is a physically based means to identify regions of texture within a sidescan echogram, 

 and could provide a basis for objective, automated riverbed sediment classification.
</code></pre>
</div>

<h2 id="syntax-5">Syntax</h2>

<p>You call the function like this::</p>

<p>[] = PyHum.texture2(humfile, sonpath, win, doplot, numclasses)</p>

<h2 id="parameters-5">Parameters</h2>

<div class="highlighter-rouge"><pre class="highlight"><code> humfile : str
   path to the .DAT file
 sonpath : str
   path where the *.SON files are
 win : int, *optional* [Default=100]
   pixel in pixels of the moving window
 shift : int, *optional* [Default=10]
   shift in pixels for moving window operation
 doplot : int, *optional* [Default=1]
   if 1, make plots, otherwise do not make plots
 numclasses : int, *optional* [Default=4]
   number of 'k means' that the texture lengthscale will be segmented into
</code></pre>
</div>

<h2 id="returns-5">Returns</h2>

<div class="highlighter-rouge"><pre class="highlight"><code> sonpath+base+'_data_class.dat': memory-mapped file
    contains the texture lengthscale map

 sonpath+base+'_data_kclass.dat': memory-mapped file
    contains the k-means segmented texture lengthscale map
</code></pre>
</div>

<h1 id="e1e2-module">e1e2 module</h1>

<p>Analysis of first (e1, ‘roughness’) and second (e2, ‘hardness’) echo returns from the high-frequency downward looking echosounder</p>

<p>Generates generalised acoustic parameters for the purposes of point classification of submerged substrates/vegetation</p>

<p>Accounts for the absorption of sound in water</p>

<p>Does a basic k-means cluster of e1 and e2 coefficients into specified number of ‘acoustic classes’</p>

<p>Based on code by Barb Fagetter (blueseas@oceanecology.ca)</p>

<h2 id="syntax-6">Syntax</h2>
<p>You call the function like this::</p>

<p>[] = PyHum.e1e2(humfile, sonpath, cs2cs_args, ph, temp, salinity, beam, transfreq, integ, numclusters, doplot)</p>

<h2 id="parameters-6">Parameters</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>humfile : str
   path to the .DAT file

sonpath : str
   path where the *.SON files are

cs2cs_args : int, *optional* [Default="epsg:26949"]
   arguments to create coordinates in a projected coordinate system
   this argument gets given to pyproj to turn wgs84 (lat/lon) coordinates
   into any projection supported by the proj.4 libraries

ph : float, *optional* [Default=7.0]
   water acidity in pH

temp : float, *optional* [Default=10.0]
   water temperature in degrees Celsius

salinity : float, *optional* [Default=0.0]
   salinity of water in parts per thousand

beam : float, *optional* [Default=20.0]
   beam width in degrees

transfreq : float, *optional* [Default=200.0]
   transducer frequency in kHz

integ : int, *optional* [Default=5]
   number of pings over which to integrate

numclusters : int, *optional* [Default=3]
   transducer frequency in kHz

doplot : int, *optional* [Default=1]
   1 = make plots, otherwise do not
</code></pre>
</div>

<h2 id="returns-6">Returns</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>sonpath+base+'rough_and_hard'+str(p)+'.csv'  : csv file
    contains the following fields: 'longitude', 'latitude', 'easting', 'northing', 'depth', 
    'roughness', 'hardness', 'average roughness', 'average hardness','k-mean label'
    of the pth chunk
    'average' implies average over 'integ' successive pings

The following are returned if doplot==1:

sonpath+'e1e2_scan'+str(p).png : png image file
   png image file showing the downward echosounder echogram overlain with the locations of the start and 
   end of the first and second echo region envelope 

sonpath+'e1e2_kmeans'+str(p).png: png image file
    png image file showing 1) (left) volume scattering coefficient 1 versus volume scattering coefficient 2, colour-coded
    by k-means acoustic class, and
    2) (right) e1 versus e2, colour-coded
    by k-means acoustic class

sonpath+'rgh_hard_kmeans'+str(p).png : png image file
    png image file showing scatter plot of easting versus northing colour-coded by k-means acoustic class 

sonpath+'map_rgh'+str(p).png : png image file
    png image file showing scatter plot of 'roughness' (e1) overlying an aerial image pulled from an ESRI image server 

sonpath+'map_hard'+str(p).png : png image file
    png image file showing scatter plot of 'hardness' (e2) overlying an aerial image pulled from an ESRI image server 

sonpath,'Rough'+str(p).png : png image file 
    png image overlay associated with the kml file, sonpath,'Hard'+str(p).kml

sonpath,'Rough'+str(p).kml : kml file
    kml overlay for showing roughness scatter plot (sonpath,'Rough'+str(p).png)

sonpath,'Hard'+str(p).png : png image file
    png image overlay associated with the kml file, sonpath,'Hard'+str(p).kml

sonpath,'Hard'+str(p).kml : kml file
    kml overlay for showing harness scatter plot (sonpath,'Hard'+str(p).png) e1e2 module =========================
</code></pre>
</div>

<p>Analysis of first (e1, ‘roughness’) and second (e2, ‘hardness’) echo returns from the high-frequency downward looking echosounder</p>

<p>Generates generalised acoustic parameters for the purposes of point classification of submerged substrates/vegetation</p>

<p>Accounts for the absorption of sound in water</p>

<p>Does a basic k-means cluster of e1 and e2 coefficients into specified number of ‘acoustic classes’</p>

<p>Based on code by Barb Fagetter (blueseas@oceanecology.ca)</p>

<h2 id="syntax-7">Syntax</h2>
<p>You call the function like this::</p>

<p>[] = PyHum.e1e2(humfile, sonpath, cs2cs_args, ph, temp, salinity, beam, transfreq, integ, numclusters, doplot)</p>

<h2 id="parameters-7">Parameters</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>humfile : str
   path to the .DAT file

sonpath : str
   path where the *.SON files are

cs2cs_args : int, *optional* [Default="epsg:26949"]
   arguments to create coordinates in a projected coordinate system
   this argument gets given to pyproj to turn wgs84 (lat/lon) coordinates
   into any projection supported by the proj.4 libraries

ph : float, *optional* [Default=7.0]
   water acidity in pH

temp : float, *optional* [Default=10.0]
   water temperature in degrees Celsius

salinity : float, *optional* [Default=0.0]
   salinity of water in parts per thousand

beam : float, *optional* [Default=20.0]
   beam width in degrees

transfreq : float, *optional* [Default=200.0]
   transducer frequency in kHz

integ : int, *optional* [Default=5]
   number of pings over which to integrate

numclusters : int, *optional* [Default=3]
   transducer frequency in kHz

doplot : int, *optional* [Default=1]
   1 = make plots, otherwise do not
</code></pre>
</div>

<h2 id="returns-7">Returns</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>sonpath+base+'rough_and_hard'+str(p)+'.csv'  : csv file
    contains the following fields: 'longitude', 'latitude', 'easting', 'northing', 'depth', 
    'roughness', 'hardness', 'average roughness', 'average hardness','k-mean label'
    of the pth chunk
    'average' implies average over 'integ' successive pings

The following are returned if doplot==1:

sonpath+'e1e2_scan'+str(p).png : png image file
   png image file showing the downward echosounder echogram overlain with the locations of the start and 
   end of the first and second echo region envelope 

sonpath+'e1e2_kmeans'+str(p).png: png image file
    png image file showing 1) (left) volume scattering coefficient 1 versus volume scattering coefficient 2, colour-coded
    by k-means acoustic class, and
    2) (right) e1 versus e2, colour-coded
    by k-means acoustic class

sonpath+'rgh_hard_kmeans'+str(p).png : png image file
    png image file showing scatter plot of easting versus northing colour-coded by k-means acoustic class 

sonpath+'map_rgh'+str(p).png : png image file
    png image file showing scatter plot of 'roughness' (e1) overlying an aerial image pulled from an ESRI image server 

sonpath+'map_hard'+str(p).png : png image file
    png image file showing scatter plot of 'hardness' (e2) overlying an aerial image pulled from an ESRI image server 

sonpath,'Rough'+str(p).png : png image file 
    png image overlay associated with the kml file, sonpath,'Hard'+str(p).kml

sonpath,'Rough'+str(p).kml : kml file
    kml overlay for showing roughness scatter plot (sonpath,'Rough'+str(p).png)

sonpath,'Hard'+str(p).png : png image file
    png image overlay associated with the kml file, sonpath,'Hard'+str(p).kml

sonpath,'Hard'+str(p).kml : kml file
    kml overlay for showing harness scatter plot (sonpath,'Hard'+str(p).png)
</code></pre>
</div>

<h1 id="gui-module">GUI module</h1>

<div class="highlighter-rouge"><pre class="highlight"><code> A graphical user interface which essentially serves as a 'wrapper' to the above functions, 
 allowing graphical input of processing options and sequential analysis of the data using PyHum modules
</code></pre>
</div>

<h2 id="syntax-8">Syntax</h2>

<p>You call the function like this::</p>

<div class="highlighter-rouge"><pre class="highlight"><code> python -c "import PyHum; PyHum.gui()"
 [] = PyHum.gui()
</code></pre>
</div>

<h2 id="parameters-8">Parameters</h2>

<div class="highlighter-rouge"><pre class="highlight"><code> None
</code></pre>
</div>

<h2 id="returns-8">Returns</h2>

<div class="highlighter-rouge"><pre class="highlight"><code> None
</code></pre>
</div>


        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      

      


    </div>

    
  </article>

  
  
</div>


    </script>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/dbuscombe-usgs"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://dbuscombe-usgs.github.io/PyHum//feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 PyHum. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="http://dbuscombe-usgs.github.io/PyHum//assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

